import{Z as R,A as y,f as B,b as p,z as t,n as A,o,M as N,G as V,U as j,_ as L,$ as W,e as m,g as s,d as l,w as g,k as F,j as H,t as q,F as U,r as Z,V as J}from"../modules/vue-q-_ObaRP.js";import{n as K,l as O,z as Q,A as X,B as Y,D as ee,E as te,s as se,p as oe,G as ne,x as re,_ as ie}from"../index-CBziRMgP.js";import{u as le,a as T,S as ae}from"./SlideWrapper-C5Bl_2kz.js";import{r as ce,u as ue,a as de,o as me,S as pe,_ as ve,G as fe,b as xe,c as _e}from"./shortcuts-DFn7VWEU.js";import{_ as ke,C as ge}from"./NoteDisplay.vue_vue_type_style_index_0_lang-DNIBN29H.js";import{_ as ye}from"./DrawingControls.vue_vue_type_style_index_0_lang-ywtXrEOK.js";import{_ as M}from"./IconButton.vue_vue_type_script_setup_true_lang-Dfu3nREy.js";import{a as Ce}from"./useSlideInfo-MRor-WPW.js";import"../modules/shiki-CkLMIXvr.js";import"./context-BZM2_35w.js";import"../modules/unplugin-icons-oSvymeXl.js";function be(){const{counter:v,isActive:r,reset:i,pause:u,resume:d}=R(1e3,{controls:!0});return{timer:y(()=>{const c=v.value,C=Math.floor(c%60).toString().padStart(2,"0");return`${Math.floor(c/60).toString().padStart(2,"0")}:${C}`}),isTimerAvctive:r,resetTimer:i,toggleTimer:()=>r.value?u():d()}}const Se=B({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(v){const r=v,{info:i}=Ce(r.no);return(u,d)=>{var f,c;return o(),p(ke,{class:A(r.class),note:(f=t(i))==null?void 0:f.note,"note-html":(c=t(i))==null?void 0:c.noteHTML,"clicks-context":v.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),he={class:"bg-main h-full slidev-presenter"},we={class:"relative grid-section next flex flex-col p-2 lg:p-4"},$e={key:1,class:"h-full flex justify-center items-center"},ze={key:0,class:"grid-section note of-auto"},Ne={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Fe={class:"border-t border-main py-1 px-2 text-sm"},Te={class:"grid-section bottom flex"},Me={class:"group flex items-center justify-center pl-4 select-none"},Be={class:"w-22px cursor-pointer"},Ae={class:"group-not-hover:hidden flex flex-col items-center"},De={key:0,class:"i-carbon:pause text-lg"},Ee={key:1,class:"i-carbon:play"},Pe={class:"text-2xl px-3 my-auto tabular-nums"},Ge={class:"progress-bar"},Ie=B({__name:"presenter",setup(v){const r=Z();ce(),ue(r),de();const{clicksContext:i,currentSlideNo:u,currentSlideRoute:d,hasNext:f,nextRoute:c,slides:C,getPrimaryClicks:h,total:D}=K(),{isDrawing:E}=le();O({title:`Presenter - ${se}`});const{timer:P,isTimerAvctive:G,resetTimer:w,toggleTimer:$}=be(),I=y(()=>C.value.map(_=>re(_))),a=y(()=>i.value.current<i.value.total?[d.value,i.value.current+1]:f.value?[c.value,0]:null),x=y(()=>a.value&&I.value[a.value[0].no-1]);N(a,()=>{x.value&&a.value&&(x.value.current=a.value[1])},{immediate:!0});const z=J();return V(()=>{const _=r.value.querySelector("#slide-content"),e=j(L()),k=W();N(()=>{if(!k.value||E.value||!ne.value)return;const n=_.getBoundingClientRect(),b=(e.x-n.left)/n.width*100,S=(e.y-n.top)/n.height*100;if(!(b<0||b>100||S<0||S>100))return{x:b,y:S}},n=>{oe.cursor=n})}),(_,e)=>{var k;return o(),m(U,null,[s("div",he,[s("div",{class:A(["grid-container",`layout${t(Q)}`])},[s("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[l(T,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:t(me)},{default:g(()=>[l(pe,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(o(),p(ge,{key:(k=t(d))==null?void 0:k.no,"clicks-context":t(h)(t(d)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),e[4]||(e[4]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),s("div",we,[a.value&&x.value?(o(),p(T,{key:"next"},{default:g(()=>[(o(),p(ae,{key:a.value[0].no,"clicks-context":x.value,route:a.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(o(),m("div",$e,[...e[5]||(e[5]=[s("div",{class:"text-gray-500"}," End of the presentation ",-1)])])),e[6]||(e[6]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),z.value&&t(X)?(o(),m("div",ze,[l(t(z))])):(o(),m("div",Ne,[(o(),p(Se,{key:`static-${t(u)}`,no:t(u),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:F({fontSize:`${t(Y)}em`}),"clicks-context":t(i)},null,8,["no","style","clicks-context"])),s("div",Fe,[l(M,{title:"Increase font size",onClick:t(ee)},{default:g(()=>[...e[7]||(e[7]=[s("div",{class:"i-carbon:zoom-in"},null,-1)])]),_:1},8,["onClick"]),l(M,{title:"Decrease font size",onClick:t(te)},{default:g(()=>[...e[8]||(e[8]=[s("div",{class:"i-carbon:zoom-out"},null,-1)])]),_:1},8,["onClick"]),H("v-if",!0)])])),s("div",Te,[l(ve,{persist:!0}),e[12]||(e[12]=s("div",{"flex-auto":""},null,-1)),s("div",Me,[s("div",Be,[e[11]||(e[11]=s("div",{class:"i-carbon:time group-hover:hidden text-xl"},null,-1)),s("div",Ae,[s("div",{class:"relative op-80 hover:op-100",onClick:e[2]||(e[2]=(...n)=>t($)&&t($)(...n))},[t(G)?(o(),m("div",De)):(o(),m("div",Ee))]),s("div",{class:"op-80 hover:op-100",onClick:e[3]||(e[3]=(...n)=>t(w)&&t(w)(...n))},[...e[10]||(e[10]=[s("div",{class:"i-carbon:renew"},null,-1)])])])]),s("div",Pe,q(t(P)),1)])]),(o(),p(ye,{key:2}))],2),s("div",Ge,[s("div",{class:"progress h-3px bg-primary transition-all",style:F({width:`${(t(u)-1)/(t(D)-1)*100+1}%`})},null,4)])]),l(fe),l(xe),l(_e)],64)}}}),Oe=ie(Ie,[["__scopeId","data-v-4963135a"]]);export{Oe as default};
